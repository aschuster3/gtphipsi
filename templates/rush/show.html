{% extends "base_bros_only.html" %}
{% load url from future %}

{% block title %}
    Rush Info | {{ block.super }}
{% endblock %}

{% block content %}
    <div style="float: right; padding: 15px"><a href="{% url 'gtphipsi.rush.views.list' %}">back to list</a></div>
    <h1>{{ rush.title }}</h1>
    <h2>{{ rush.start_date|date:"l, F j" }} &ndash; {{ rush.end_date|date:"l, F j" }}</h2>
    {% with rush.get_unique_name as rush_name %}
    <p><a href="{% url 'gtphipsi.rush.views.edit' name=rush_name %}">edit</a></p><br />
    {% if rush.is_current %}
        <p>This is the current rush, meaning that this rush's schedule is displayed on the main site.</p><br />
    {% endif %}
    <p><strong>Visible:</strong> {{ rush.visible|yesno:"Yes,No" }} {% if not rush.visible %}<span style="padding-left: 15px"><a href="{% url 'gtphipsi.rush.views.edit' name=rush_name %}?visible=true">make visible</a></span>{% endif %}<br />
    <strong>Pledges:</strong> {{ rush.pledges }} {% if rush.is_current %}<span style="padding-left: 15px"><a href="{% url 'gtphipsi.rush.views.edit' name=rush_name %}?new_pledges=1">+</a>/<a href="{% url 'gtphipsi.rush.views.edit' name=rush_name %}?new_pledges=-1">-</a></span>{% endif %}</p>
    <h3>Events</h3>
    <ul>
    {% for event in rush.events.all %}
        {% with event.id as event_id %}
        <li>{{ event.date|date:"M j" }}, {{ event.start|time:"f" }} &ndash; {{ event.end|time:"f" }}: {{ event.title }}<span style="padding-left: 25px"><a href="{% url 'gtphipsi.rush.views.edit_event' id=event_id %}">edit</a></span></li>
        {% endwith %}
    {% empty %}
        <li style="list-style-type: none">This rush has no events.</li>
    {% endfor %}
    </ul>
    <p><a href="{% url 'gtphipsi.rush.views.add_event' name=rush_name %}">add event</a></p>
    {% endwith %}
{% endblock %}